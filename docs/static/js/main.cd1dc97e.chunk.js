(this["webpackJsonpmedia-upload-component"]=this["webpackJsonpmedia-upload-component"]||[]).push([[0],{15:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADRElEQVRoge3Z3YtVVRjH8Y+jvZ1KZLJxKooSURyIDAKxF9SgiLotiKiuuyjoRtS7KAiDgvoLpiKqm/Ki94uCshcIosTQwl4gyqakdExNyWa6WM9x7+Oc2XPmnLVPU5wvbPbZe6/n5bfXftZaex8GDBhQxaI+xVmCa7AWw5jCj7F9jr/7lEfXrMez+APTs2wHMY4NvQSqq0cuwTO4sxTjK+nuH8QQLsMajJXsdmILvq0pr3mxCRPS3f4dj+Lyivar8Agmw+YQbqs1ww64FX9KCb2EkXnYXowXw/YU7s+eXYeM4Wgksr1LH4vCdgoncWOe1GbSwHW4WXokmpyFLyURj2WI83j4msCyDP5OsxIv4LjWEWcv7sLDcfy+VMi9MoR3w+eODP6QCq9ZiKekkec9fK8QNCXNBWtzBcW68HkcK3I4OyYlOy4Nq2U2SMKm8WqvwdqwM3w/0Kujj8LRExVtGhGo57vWhvsi/lu9OLk2nOyXivnfYCRy+G2uhlWFuTH2L+OvDEl1w6/SvDSM86oazibkJtwbv/fny6srJmI/Oh+jFYoCay7oVlVa1M9PkctTuANnz2WwWjGkficVWmV39ok9WueuX7DVLHV7Eb6Jhq/ggv7k2BFLcQPukSblk1Ken2qzlns+Lr4j/wg10i5gD6zEJ4qVxdLmhTFpZp7EpRkDkgp0b2zzKtY5OFdaDk1LvQSejBNPZwxESnyf4tneJ6+YURyROmEdfBaBNlYYdROkLKIuMTuUOuFQHAxncl4WcWaP5BazPnzugRNxcE4Gx2eKGFUIaXetV5aFv8PwQxxUvVd3ym4zE20KoVXMFxninR++jg7h6zh5fQbHJ6QENyuWFmUm4truaNsrV8X+ADwkqXotg+N2lHskN1sV70qWK94AN9UQrC4hDcU67PbmyW1x4mdcmTlgXUKeC78fK31oXIw3FWI2ZwyYW0hDIWJS65dKcCHeKAV+HXfjCh0snSvIIaSBq6WaaD5OR3DLbAaLo/HhUgKdbru6ELKrizjNx2lGT7RjOR7E29I801w6V20f1CjkmDRNjEuF3a+/Q1qoc/g9TY6vgguCgZCFxkDIQuN/I2RJH2J8qA/D74ABAwb8t/gHeB4agYHMcVoAAAAASUVORK5CYII="},18:function(e,t,a){e.exports=a(47)},23:function(e,t,a){},24:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),l=a.n(o),c=(a(23),a(24),a(2)),i=a(3),u=a.n(i),s=a(15),d=a.n(s);function m(e){var t=e.isDisabled,a=e.onFileAdd,o=Object(n.useState)(!1),l=Object(c.a)(o,2),i=l[0],s=l[1],m=Object(n.useRef)(null),p=i?"Drop it!":"Click or drag file into this box to upload";return r.a.createElement("div",{className:u()("dropzone",{highlight:i,disabled:t}),onDragOver:function(e){e.preventDefault(),t||s(!0)},onDragLeave:function(){return s(!1)},onDrop:function(e){e.preventDefault(),t||(a&&a(e.dataTransfer.files),s(!1))},onClick:function(){return!t&&m.current.click()}},r.a.createElement("input",{ref:m,className:"file-input",type:"file",onChange:function(e){t||a&&a(e.target.files)}}),r.a.createElement("img",{alt:"upload",className:"Icon",src:d.a}),r.a.createElement("span",null,p))}var p=a(4),f=a.n(p),g=a(16),v=a.n(g),h=a(17),E=a.n(h);var A=function(e){return parseFloat(e.target.value)};function b(e){var t=e.file,a=e.onDone,o=e.onError,l=Object(n.useState)(.85),i=Object(c.a)(l,2),u=i[0],s=i[1];return Object(n.useEffect)((function(){t&&function(e,t){return new Promise((function(a,n){var r=new Image;r.onerror=function(){URL.revokeObjectURL(r.src),n(new Error("Unexpected Error"))},r.onload=function(){try{URL.revokeObjectURL(r.src);var e=r.width,o=r.height,l=document.createElement("canvas");l.width=e,l.height=o,l.getContext("2d").drawImage(r,0,0,e,o);var c=l.toDataURL("image/jpeg",t);a(c)}catch(i){n(i)}},r.src=URL.createObjectURL(e)}))}(t,u).then(a).catch(o)}),[u,t]),t?r.a.createElement("div",{className:"compress-image"},r.a.createElement("span",null,"Quality"),r.a.createElement("input",{type:"range",value:u,min:.05,max:1,step:.05,onChange:v.a.flow(A,s)}),r.a.createElement("span",null,Math.round(100*u),"%")):null}function w(e){var t={backgroundImage:"url(".concat(e.url,")")};return r.a.createElement("div",{className:"preview",style:t})}b.propTyes={file:f.a.object,onDone:f.a.func,onError:f.a.func};a(46);function O(e){var t=Math.round(100*e.value),a="".concat(t,"%");return r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-outer"},r.a.createElement("div",{className:"progress-inner",style:{width:a}},a)))}function j(e){var t=e.width,a=e.height,o=e.uploadServer,l=Object(n.useState)(null),i=Object(c.a)(l,2),s=i[0],d=i[1],p=Object(n.useState)(-1),f=Object(c.a)(p,2),g=f[0],v=f[1],h=Object(n.useState)(null),A=Object(c.a)(h,2),j=A[0],D=A[1],k=Object(n.useState)(null),y=Object(c.a)(k,2),L=y[0],R=y[1],C=function(){d(null),v(-1),R(null),D(null)},N=g>-1,S=null!==j,U=N&&!S,x=N?S?"Done":"Uploading":"Cancel";return r.a.createElement("div",{className:u()("media-upload",{"upload-mode":N,"upload-done":S}),style:{width:t,height:a}},null===s?r.a.createElement(m,{onFileAdd:function(e){e.length>1&&alert("Multiple files detected. Only first file being process");var t=e[0];d(t)}}):[r.a.createElement("div",{className:"toolbar",key:0},r.a.createElement("button",{onClick:C,title:"Upload another image",disabled:U},x),r.a.createElement("div",{className:"upload-status"},r.a.createElement(O,{value:g}),r.a.createElement("a",{className:"image-path",href:j,title:"Link to uploaded image",target:"_blank"},"Link to uploaded Image")),r.a.createElement(b,{file:s,onDone:R,onError:function(e){C(),alert("Error while processing image: ".concat(e.message,". Please try another file"))}}),r.a.createElement("button",{onClick:function(){var e=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new Blob([n],{type:a})}(L);!function(e,t,a,n,r){var o=new FormData;o.append("file",t),E.a.post(e+"/upload",o,{onUploadProgress:function(e){var t=e.loaded/e.total;a(t)}}).then((function(t){var a=t.data.path;n({path:e+a})})).catch(r)}(o,e,v,(function(e){D(e.path)}),(function(e){alert("Error while uploading image: ".concat(e.message)),v(-1)}))},className:"btn-upload",title:"Upload image with current quality"},"Upload")),r.a.createElement(w,{url:L,key:1})])}j.defaultProps={width:"100%",height:"70%",uploadServer:""};var D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(j,{width:"600px",height:"600px",uploadServer:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_UPLOAD_SERVER}))};l.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.cd1dc97e.chunk.js.map